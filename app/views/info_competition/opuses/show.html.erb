<% _mark_items = @recruit.activity.mark_items(@recruit.project) %>

<%= render partial: "pc_mark", locals: {_mark_items: _mark_items} %>

<script type="text/javascript">
//总体设计评分条
  var ScrollBar = {
      value: <%= _mark_items[0][:max] / 10 %>,
      maxValue: <%= _mark_items[0][:max] %>,
      step: 1,
      currentX: 0,
      Initialize: function (itemArray) {
          if (this.value > this.maxValue) {
              alert("给定当前值大于了最大值");
              return;
          }
          this.GetValue();
          $("#scroll_Track").css("width", this.currentX - 18 + "px");
          $("#scroll_Thumb").css("margin-left", this.currentX - 20 + "px");
          this.Value(itemArray);
          console.log('--------------');
      },
      Value: function (itemArray) {
          var valite = false;
          var currentValue = 0;
          $("#scroll_Thumb").mousedown(function () {
              valite = true;
              console.log('--------------');
              $(document.body).mousemove(function (event) {
                  console.log('--------------');
                  if (valite == false) return;
                  var changeX = event.clientX - ScrollBar.currentX;
                  currentValue = changeX - ScrollBar.currentX - $("#Demo").offset().left;
                  $("#scroll_Thumb").css("margin-left", currentValue - 10 + "px");
                  $("#scroll_Track").css("width", currentValue + "px");
                  if ((currentValue + 5) >= $("#scrollBar").width()) {
                      $("#scroll_Thumb").css("margin-left", $("#scrollBar").width() - 10 + "px");
                      $("#scroll_Track").css("width", $("#scrollBar").width() + 2 + "px");
                      ScrollBar.value = ScrollBar.maxValue;
                  } else if (currentValue <= 0) {
                      $("#scroll_Thumb").css("margin-left", "-8px");
                      $("#scroll_Track").css("width", "0px");
                      ScrollBar.value = 0;
                  } else {
                      ScrollBar.value = Math.round(<%= _mark_items[0][:max] %> * (currentValue / $("#scrollBar").width()));
                  }
                  $("#scrollBarTxt").html(ScrollBar.value);
                  $("#design").html(ScrollBar.value);
                  itemArray[0] = ScrollBar.value;
                  $("#itemArray_").value = itemArray;
                  $("#total_points").html(ScrollBar.value+ScrollBar1.value+ScrollBar2.value+ScrollBar3.value);
              });
          });
          $(document.body).mouseup(function () {
              ScrollBar.value = Math.round(<%= _mark_items[0][:max] %> * (currentValue / $("#scrollBar").width()));
              valite = false;
              if (ScrollBar.value >= ScrollBar.maxValue) ScrollBar.value = ScrollBar.maxValue;
              if (ScrollBar.value <= 0) ScrollBar.value = 0;
              $("#scrollBarTxt").html(ScrollBar.value);
              $("#design").html(ScrollBar.value);
              $("#itemArray_").value = itemArray;
              itemArray[0] = ScrollBar.value;
              $("#total_points").html(ScrollBar.value+ScrollBar1.value+ScrollBar2.value+ScrollBar3.value);
          });
      },
      GetValue: function () {
          this.currentX = $("#scrollBar").width() * (this.value / this.maxValue);
      }
  }
//教学过程
  var ScrollBar1 = {
      value: <%= _mark_items[1][:max] / 10 %>,
      maxValue: <%= _mark_items[1][:max] %>,
      step: 1,
      currentX: 0,
      Initialize: function (itemArray) {
          if (this.value > this.maxValue) {
              alert("给定当前值大于了最大值");
              return;
          }
          this.GetValue();
          $("#scroll_Track1").css("width", this.currentX - 18 + "px");
          $("#scroll_Thumb1").css("margin-left", this.currentX - 20 + "px");
          this.Value(itemArray);
      },
      Value: function (itemArray) {
          var valite = false;
          var currentValue = 0;
          $("#scroll_Thumb1").mousedown(function () {
              valite = true;
              $(document.body).mousemove(function (event) {
                  if (valite == false) return;
                  var changeX = event.clientX - ScrollBar1.currentX;
                  currentValue = changeX - ScrollBar1.currentX - $("#Demo1").offset().left;
                  $("#scroll_Thumb1").css("margin-left", currentValue - 10 + "px");
                  $("#scroll_Track1").css("width", currentValue + "px");
                  if ((currentValue + 5) >= $("#scrollBar1").width()) {
                      $("#scroll_Thumb1").css("margin-left", $("#scrollBar1").width() - 10 + "px");
                      $("#scroll_Track1").css("width", $("#scrollBar1").width() + 2 + "px");
                      ScrollBar1.value = ScrollBar1.maxValue;
                  } else if (currentValue <= 0) {
                      $("#scroll_Thumb1").css("margin-left", "-8px");
                      $("#scroll_Track1").css("width", "0px");
                      ScrollBar1.value = 0;
                  } else {
                      ScrollBar1.value = Math.round(<%= _mark_items[1][:max] %> * (currentValue / $("#scrollBar1").width()));
                  }
                  $("#scrollBarTxt1").html(ScrollBar1.value);
                  $("#process").html(ScrollBar1.value);
                  itemArray[1] = ScrollBar1.value;
                  $("#itemArray_").value = itemArray;
                  $("#total_points").html(ScrollBar.value+ScrollBar1.value+ScrollBar2.value+ScrollBar3.value);
              });
          });
          $(document.body).mouseup(function () {
              ScrollBar1.value = Math.round(<%= _mark_items[1][:max] %> * (currentValue / $("#scrollBar1").width()));
              valite = false;
              if (ScrollBar1.value >= ScrollBar1.maxValue) ScrollBar1.value = ScrollBar1.maxValue;
              if (ScrollBar1.value <= 0) ScrollBar1.value = 0;
              $("#scrollBarTxt1").html(ScrollBar1.value);
              $("#process").html(ScrollBar1.value);
              itemArray[1] = ScrollBar1.value;
              $("#itemArray_").value = itemArray;
              $("#total_points").html(ScrollBar.value+ScrollBar1.value+ScrollBar2.value+ScrollBar3.value);
          });
      },
      GetValue: function () {
          this.currentX = $("#scrollBar1").width() * (this.value / this.maxValue);
      }
  }
//教学效果
  var ScrollBar2 = {
      value: <%= _mark_items[2][:max] / 10 %>,
      maxValue: <%= _mark_items[2][:max] %>,
      step: 1,
      currentX: 0,
      Initialize: function (itemArray) {
          if (this.value > this.maxValue) {
              alert("给定当前值大于了最大值");
              return;
          }
          this.GetValue();
          $("#scroll_Track2").css("width", this.currentX - 18 + "px");
          $("#scroll_Thumb2").css("margin-left", this.currentX - 20 + "px");
          this.Value(itemArray);
      },
      Value: function (itemArray) {
          var valite = false;
          var currentValue = 0;
          $("#scroll_Thumb2").mousedown(function () {
              valite = true;
              $(document.body).mousemove(function (event) {
                  if (valite == false) return;
                  var changeX = event.clientX - ScrollBar2.currentX;
                  currentValue = changeX - ScrollBar2.currentX - $("#Demo2").offset().left;
                  $("#scroll_Thumb2").css("margin-left", currentValue - 10 + "px");
                  $("#scroll_Track2").css("width", currentValue + "px");
                  if ((currentValue + 5) >= $("#scrollBar2").width()) {
                      $("#scroll_Thumb2").css("margin-left", $("#scrollBar2").width() - 10 + "px");
                      $("#scroll_Track2").css("width", $("#scrollBar2").width() + 2 + "px");
                      ScrollBar2.value = ScrollBar2.maxValue;
                  } else if (currentValue <= 0) {
                      $("#scroll_Thumb2").css("margin-left", "-8px");
                      $("#scroll_Track2").css("width", "0px");
                      ScrollBar2.value = 0;
                  } else {
                      ScrollBar2.value = Math.round(<%= _mark_items[2][:max] %> * (currentValue / $("#scrollBar2").width()));
                  }
                  $("#scrollBarTxt2").html(ScrollBar2.value);
                  $("#result").html(ScrollBar2.value);
                  itemArray[2] = ScrollBar2.value;
                  $("#itemArray_").value = itemArray;
                  $("#total_points").html(ScrollBar.value+ScrollBar1.value+ScrollBar2.value+ScrollBar3.value);
              });
          });
          $(document.body).mouseup(function () {
              ScrollBar2.value = Math.round(<%= _mark_items[2][:max] %> * (currentValue / $("#scrollBar2").width()));
              valite = false;
              if (ScrollBar2.value >= ScrollBar2.maxValue) ScrollBar2.value = ScrollBar2.maxValue;
              if (ScrollBar2.value <= 0) ScrollBar2.value = 0;
              $("#scrollBarTxt2").html(ScrollBar2.value);
              $("#result").html(ScrollBar2.value);
              itemArray[2] = ScrollBar2.value;
              $("#itemArray_").value = itemArray;
              $("#total_points").html(ScrollBar.value+ScrollBar1.value+ScrollBar2.value+ScrollBar3.value);
          });
      },
      GetValue: function () {
          this.currentX = $("#scrollBar2").width() * (this.value / this.maxValue);
      }
  }
//特色创新
  var ScrollBar3 = {
      value: <%= _mark_items[3][:max] / 10 %>,
      maxValue: <%= _mark_items[3][:max] %>,
      step: 1,
      currentX: 0,
      Initialize: function (itemArray) {
          if (this.value > this.maxValue) {
              alert("给定当前值大于了最大值");
              return;
          }
          this.GetValue();
          $("#scroll_Track3").css("width", this.currentX - 18 + "px");
          $("#scroll_Thumb3").css("margin-left", this.currentX - 20 + "px");
          this.Value(itemArray);
      },
      Value: function (itemArray) {
          var valite = false;
          var currentValue = 0;
          $("#scroll_Thumb3").mousedown(function () {
              valite = true;
              $(document.body).mousemove(function (event) {
                  if (valite == false) return;
                  var changeX = event.clientX - ScrollBar3.currentX;
                  currentValue = changeX - ScrollBar3.currentX - $("#Demo3").offset().left;
                  $("#scroll_Thumb3").css("margin-left", currentValue - 10 + "px");
                  $("#scroll_Track3").css("width", currentValue + "px");
                  if ((currentValue + 5) >= $("#scrollBar3").width()) {
                      $("#scroll_Thumb3").css("margin-left", $("#scrollBar3").width() - 10 + "px");
                      $("#scroll_Track3").css("width", $("#scrollBar3").width() + 2 + "px");
                      ScrollBar3.value = ScrollBar3.maxValue;
                  } else if (currentValue <= 0) {
                      $("#scroll_Thumb3").css("margin-left", "-8px");
                      $("#scroll_Track3").css("width", "0px");
                      ScrollBar3.value = 0;
                  } else {
                      ScrollBar3.value = Math.round(<%= _mark_items[3][:max] %> * (currentValue / $("#scrollBar3").width()));
                  }
                  $("#scrollBarTxt3").html(ScrollBar3.value);
                  $("#innovate").html(ScrollBar3.value);
                  itemArray[3] = ScrollBar3.value;
                  $("#itemArray_").value = itemArray;
                  $("#total_points").html(ScrollBar.value+ScrollBar1.value+ScrollBar2.value+ScrollBar3.value);
              });
          });
          $(document.body).mouseup(function () {
              ScrollBar3.value = Math.round(<%= _mark_items[3][:max] %> * (currentValue / $("#scrollBar3").width()));
              valite = false;
              if (ScrollBar3.value >= ScrollBar3.maxValue) ScrollBar3.value = ScrollBar3.maxValue;
              if (ScrollBar3.value <= 0) ScrollBar3.value = 0;
              $("#scrollBarTxt3").html(ScrollBar3.value);
              $("#innovate").html(ScrollBar3.value);
              itemArray[3] = ScrollBar3.value;
              $("#itemArray_").val(itemArray)
              $("#total_points").html(ScrollBar.value+ScrollBar1.value+ScrollBar2.value+ScrollBar3.value);
          });
      },
      GetValue: function () {
          this.currentX = $("#scrollBar3").width() * (this.value / this.maxValue);
      }
  }

  //初始化
  $(document.body).ready(function (e) {
      var itemArray = [0,0,0,0];

      ScrollBar.Initialize(itemArray);
      ScrollBar1.Initialize(itemArray);
      ScrollBar2.Initialize(itemArray);
      ScrollBar3.Initialize(itemArray);

  });
</script>